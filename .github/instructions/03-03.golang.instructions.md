---
description: "Instructions for Go project structure, architecture, and coding standards"
applyTo: "**"
---
# Go Project Standards - Tactical Guidance

**Reference**: See `.specify/memory/golang.md` for complete specifications (CGO ban rationale, project structure, import conventions, magic values organization)

**This file contains ONLY tactical implementation patterns**

## Quick Reference

**Go Version**: 1.25.5 (ALWAYS same everywhere: dev, CI/CD, Docker)
**CGO**: BANNED (CGO_ENABLED=0) except race detector
**Linking**: Static (`-extldflags '-static'`)
**Project Layout**: cmd, internal, pkg, api (avoid /src)

## CGO Ban - CRITICAL

```bash
# Detect CGO dependencies
go list -u -m all | grep '\[.*\]$'

# Use CGO-free alternatives
# ✅ modernc.org/sqlite
# ❌ github.com/mattn/go-sqlite3
```

**ONLY Exception**: Race detector (`-race`) requires CGO_ENABLED=1 (Go toolchain limitation)

## Import Alias Pattern

```go
import (
    cryptoutilMagic "cryptoutil/internal/shared/magic"
    googleUuid "github.com/google/uuid"
    crand "crypto/rand"
    joseJwa "github.com/go-jose/go-jose/v4/jwa"
)
```

**Crypto Acronyms ALL CAPS**: RSA, ECDSA, HMAC, JWK, ED25519, PKCS8

## Magic Values Locations

- **Shared**: `internal/shared/magic/magic_*.go`
- **Domain-Specific**: `internal/<domain>/magic*.go`

## Key Takeaways

1. **Version Consistency**: Go 1.25.5 everywhere
2. **CGO Ban**: CGO_ENABLED=0 (except race detector)
3. **Project Structure**: cmd/internal/pkg/api (no /src)
4. **Import Aliases**: `cryptoutil<Package>` for internal, defined in `.golangci.yml`
5. **Crypto ALL CAPS**: RSA, ECDSA, HMAC (not Rsa, Ecdsa)
