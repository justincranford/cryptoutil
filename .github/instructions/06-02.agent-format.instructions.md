---
description: Agent file format and structure standards
applyTo: **
---
# Agent Format - Tactical Guidance

## YAML Frontmatter - MANDATORY

All agent files MUST include YAML frontmatter between `---` delimiters.

### Required Fields

- **name** (kebab-case): Unique agent identifier
- **description** (one-line): Brief agent purpose

### Optional Fields

- **tools** (array): Available tools
- **handoffs** (array): Links to other agents
- **argument-hint** (string): Expected arguments

## Agent Isolation Principle - CRITICAL

**Agents do NOT inherit copilot instructions**

When `/agent-name` invoked:
- ✅ Loads `.github/agents/agent-name.agent.md`
- ❌ Does NOT load `.github/copilot-instructions.md`
- ❌ Does NOT load `.github/instructions/*.instructions.md`

**Implication**: Agents MUST be self-contained.

## Continuous Execution Agents

**MUST include**:
1. "AUTONOMOUS EXECUTION MODE" section
2. "Maximum Quality Strategy - MANDATORY"
3. "Prohibited Stop Behaviors - ALL FORBIDDEN"
4. "Continuous Execution Rule - MANDATORY"

## Planning-Based Agents - Phase 0 Research Pattern

**For agents that generate plans (e.g., implementation-planning):**

Phase 0 is **internal research work**, NOT output documentation:

1. **Phase 0 is MANDATORY but INVISIBLE**:
   - Agent performs research, discovery, and decision-making BEFORE creating output files
   - Phase 0 findings (architecture decisions, risk assessments) feed INTO Phases 1-N
   - Phase 0 is never written to output plan.md/tasks.md as a numbered phase

2. **Phase 0 Research Must Include**:
   - Unknown analysis (unknowns that need clarification)
   - Strategic decisions (high-level approach, framework choices, technology stack)
   - Risk identification and mitigation strategies
   - Quality gates and testing strategy
   - Evidence collection in `test-output/phase0-research/` subdirectory

3. **Phase 0 Output Locations**:
   - Research findings → Stored in `test-output/phase0-research/decisions.md`
   - Risk analysis → Stored in `test-output/phase0-research/risks.md`
   - Final output: plan.md and tasks.md with Phases 1-N (Phase 0 research is the INPUT that makes these phases well-informed)

4. **Why Phase 0 is Internal-Only**:
   - Separates planning process (Phase 0) from implementation plan (Phases 1-N)
   - Prevents output noise (users don't see research artifacts)
   - Ensures plan.md/tasks.md focus on actionable work, not discovery
   - Maintains clean output documentation with only executable phases

5. **Workflow Pattern**:
   ```
   User Input → Phase 0 Research (internal) → plan.md/tasks.md (Phases 1-N) → User sees clean plan
   ```

## Key Takeaways

1. YAML frontmatter required (name, description, tools)
2. Agents are self-contained (no inheritance from copilot instructions)
3. Continuous execution rules must be in agent file (no external references)
4. Planning agents MUST include Phase 0 research (internal, not output)
5. Phase 0 feeds into well-informed Phases 1-N (research → decisions → plan)
6. Follow standard content patterns for consistency
7. Agent isolation is intentional (agents override copilot context)

## Cross-References

- [01-02.beast-mode.instructions.md](.github/instructions/01-02.beast-mode.instructions.md) - Copy patterns as needed
- [06-01.evidence-based.instructions.md](.github/instructions/06-01.evidence-based.instructions.md) - Evidence collection
- [docs/agents-vs-copilot-instructions.md](docs/agents-vs-copilot-instructions.md) - Agent isolation
