---
description: "Instructions for Git workflow, PRs, and documentation"
applyTo: "**"
---
# Git and Documentation Instructions

## Git Workflow

### Git Operations in Copilot Chat Sessions

- **ALWAYS use terminal git commands** (git status, git add, git commit, git push)
- **Commit vs Push**: Commit frequently for logical units of work; push only when ready for CI/CD and peer review
- **Pre-push hooks**: Run automatically before push to enforce quality gates (dependency checks, linting)
- **Dependency management**: Update dependencies incrementally with test validation between updates
- **Branch strategy**: Use feature branches for development; merge to main only after CI passes
- **Commit hygiene**: Keep commits atomic and focused; use conventional commit messages
- **Push readiness**: Ensure all pre-commit checks pass before pushing; resolve any hook failures
- **Local iteration (speed)**: For quick iteration while actively changing code, it's acceptable to use `git commit --no-verify` to skip local pre-commit hooks â€” but ALWAYS run `go test`, `golangci-lint`, and required pre-commit checks before pushing or opening a PR.

### Conventional Commits

- Follow [Conventional Commits](https://www.conventionalcommits.org/) spec
- Format: `<type>[optional scope]: <description>`
- Types: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert
- Use imperative mood, lowercase, no period at end
- For breaking changes: add `!` after type or use `BREAKING CHANGE:`
- Keep subject 72 chars; explain what/why in body if needed

## Terminal Command Auto-Approval

### Pattern Checking Workflow

When executing terminal commands through Copilot:

1. **Check Pattern Match**: Verify if command matches `chat.tools.terminal.autoApprove` patterns in `.vscode/settings.json`
2. **Track Unmatched**: Maintain list of unmatched commands during session
3. **End-of-Session Review**: Ask user if they'd like to add new auto-approve patterns
4. **Pattern Recommendations**:
   - **Auto-Enable (true)**: Safe, informational, build commands
   - **Auto-Disable (false)**: Destructive, dangerous, system-altering commands

### Auto-Enable Candidates

- Read-only operations (status, list, inspect, logs, history)
- Build and test commands (build, test, format, lint)
- Safe informational commands (version, info, df)
- Development workflow commands (fetch, status, diff)

### Auto-Disable Candidates

- Destructive operations (rm, delete, prune, reset, kill)
- Network operations (push, pull from remotes)
- System modifications (install, update, edit configurations)
- File system changes (create, update, delete files/directories)
- Container execution (exec, run interactive containers)

### Pattern Format

## PowerShell: git, sed, and diff notes

- **PowerShell does not include Unix utilities like `sed` by default**; avoid relying on `sed` or other Unix-only tools in Copilot chat sessions or Windows PowerShell contexts. Use Git's built-in capabilities instead: `git diff -- path/to/file` or `git show <commit> -- path/to/file` to view diffs, `git grep` to search repository content, or `Get-Content file | Select-String 'pattern'` for simple `grep`-like searches.
- **Preferred cross-platform diffs**: Use `git diff -- <file>` over `sed` pipelines; it works consistently across environments and yields consistent results for reviewers and CI.

- Use established regex: `"/^command (sub1|sub2)/": true|false`
- Group related subcommands with alternation `(cmd1|cmd2|cmd3)`
- Use `^` for start anchor and appropriate word boundaries
- Include comments explaining security rationale

## Pull Request Descriptions

### Title

- Use conventional commit format: `type(scope): description`
- Keep under 72 characters
- Types: feat, fix, docs, style, refactor, perf, test, build, ci, chore

### Sections

- **What**: Clear description of what PR does (present tense)
- **Why**: Business/technical rationale, impact on users/system
- **How**: High-level implementation approach, key decisions
- **Testing**: How tested, coverage impact, manual steps
- **Breaking Changes**: Migration guidance, API changes
- **Documentation**: README changes, migration guides

### Code Review Checklist

- **Security**: No sensitive data exposure, proper validation, secure defaults
- **Quality**: Tests added/updated, linting passes, docs updated
- **Performance**: No regressions, memory leaks addressed
- **Operations**: Logging appropriate, monitoring/metrics added

### PR Size Guidelines

- **Small (<200 lines)**: Single focused change, low risk
- **Medium (200-500 lines)**: Multiple related changes, moderate risk
- **Large (500+ lines)**: Complex feature, high risk, consider splitting
- **Epic**: Break down into smaller, independently deployable PRs

## Core Documentation Organization

- Keep docs in 2 main files: `README.md` (main), `docs/README.md` (deep dive)
- **ALWAYS add to existing README.md** instead of creating new markdown files
- **NEVER create separate documentation files** for scripts or tools
- See README for content distribution and organization

## TO DO Docs Organization and Continuous Update

### Critical Requirements

- Keep 1-6 `./docs/todos-*.md` files for tracking missing or incomplete items before ending sessions
- Review `./docs/todos-*.md` files for completed items before ending sessions, and remove completed items
- **Delete completed tasks immediately** - don't mark as done, remove from file
- Always ensure files contain ONLY active, actionable tasks

### Implementation Guidelines

- **Large cleanups**: Use create_file to rewrite entire file with only active tasks
- **Failed replacements**: Create clean version in new file, then replace original
- **Avoid complex replace_string_in_file**: Large text blocks often fail due to whitespace mismatches
