---
description: "Instructions for Speckit methodology workflow integration, evidence requirements, and feedback loops"
applyTo: "**"
---
# Speckit Workflow Integration - CRITICAL

## Core Principles

**Living Documents**: Constitution, spec, and plan evolve through implementation feedback - not static prerequisites. Update immediately when discovering constraints, contradictions, or insights.

**Iterative Reality**: Speckit structure provides organization, but embrace continuous refinement based on implementation discoveries.

**Mini-Cycle Feedback**: Update specs every 2-3 tasks (not end of phase) to prevent technical debt and misalignment.

## CLARIFY-QUIZME.md Rules - CRITICAL

**MANDATORY**: CLARIFY-QUIZME.md is ONLY for UNKNOWN answers requiring user input.

**NEVER include**:
- ❌ Questions with answers from codebase/constitution/spec/copilot instructions
- ❌ Pre-filled answers or example answers in Write-in questions

**ALWAYS**:
- ✅ Search codebase/docs before adding question
- ✅ Move known answers to clarify.md topical Q&A format
- ✅ After user answers, move to clarify.md and update constitution/spec

## Implementation-Driven Constraints

**Add to constitution.md Living Section** as discovered:
- **Constraint**: Brief description
- **Rationale**: Why it exists
- **Source**: DETAILED.md entry, commit hash
- **Impact**: What code/config must follow
- **Date Discovered**: YYYY-MM-DD

## Workflow Gates - MANDATORY

| Gate | Evidence Required | Validation |
|------|-------------------|------------|
| **Constitution** | No TBD placeholders, terminology defined, quality gates (coverage/mutation/timing), file size limits (300/400/500) | `grep -i "TBD\|TODO\|FIXME" constitution.md` = 0 |
| **Specification** | Functional/non-functional requirements, architecture diagrams, API contracts, security requirements | Verify all constitution requirements mapped |
| **Clarification** | Topical organization, clarify.md for knowns, no unanswered QUIZME questions | Verify no pending questions |
| **Plan** | Phase breakdown, task dependencies, completion criteria, risk assessment, aligns with constitution/spec/copilot | Compare plan vs constitution/spec/clarify |
| **Tasks** | Task checklist, completion criteria, phase assignments, dependencies, effort estimates (S/M/L) | Verify tasks.md matches plan.md phases |
| **Analysis** | Complexity analysis, risk assessment, dependency graph, resource requirements (optional) | Verify analyze.md exists if needed |
| **Implementation** | DETAILED.md Sections 1+2, EXECUTIVE.md, coverage ≥95%/98%, mutation ≥85%/98%, tests passing, timing <15s/<120s unit, <45s/<240s E2E | `go test ./... -coverprofile`, `gremlins unleash` |

## Evidence-Based Completion - MANDATORY

**NEVER mark tasks complete without objective evidence**:
- Code: `go build ./...` clean, `golangci-lint run` clean, no new TODOs, coverage ≥95%/98%
- Tests: `go test ./...` passes, no skips without tracking, mutation ≥80%/98%
- Git: Conventional commit, clean tree, changes align with task

## Feedback Loop Patterns

**When discovering constraints/contradictions/lessons**:
1. Document in DETAILED.md Section 2 timeline
2. Update constitution/spec/clarify immediately
3. Document in EXECUTIVE.md if affects risks/lessons
4. Commit with traceable reference to source

## DETAILED.md Structure

**Section 1: Task Checklist** - Maintain from tasks.md with ❌/⚠️/✅ status, blockers, notes, coverage, commits

**Section 2: Append-Only Timeline** - Chronological entries with:
- Date: Task description
- Work completed
- Coverage/quality metrics
- Lessons learned
- Constraints discovered (add to constitution.md)
- Related commits

## EXECUTIVE.md Structure

**Stakeholder Overview**: Current phase, progress %, coverage, mutation score, blockers

**Customer Demonstrability**: Docker Compose commands, E2E demo scenarios

**Risk Tracking**: Known issues with severity, impact, workaround, root cause, resolution, status

**Post-Mortem Lessons**: Lesson learned, prevention pattern, where applied, reference docs
