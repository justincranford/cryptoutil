---
description: "SpecKit methodology"
applyTo: "**"
---
# SpecKit

SpecKit is a spec-driven development toolset for LLM Agents to autonomously implement designs.

**Seven Steps**: 1. Constitution, 2. Clarify (MANDATORY), 3. Spec, 4. Plan, 5. Tasks, 6. Analyze (MANDATORY), 7. Implement
**Use for**: Design-before-implement, catch design issues early, LLM agent convergence
**Avoid for**: Human SDLC, validation/business-rules, spiking/quick-iteration

## CUSTOMIZATIONS

### Living Documents Pattern

Treat constitution, spec, and plan as evolving through implementation feedback - NOT static prerequisites.

**MANDATORY**: Update immediately when discovering constraints, contradictions, insights.

### Clarify and Analyze as MANDATORY

**Original**: Clarify and Analyze steps are optional
**Customization**: Treat both as MANDATORY

**Rationale**: Clarify identifies and fixes issues in constitution and spec before proceeding to plan.

### CLARIFY-QUIZME-##.md Format

**MANDATORY**: CLARIFY-QUIZME-##.md MUST only contain UNKNOWN answers requiring user input.

**Format**: Multiple choice questions with insightful A-D answers and blank E write-in answer.

**CRITICAL: DO NOT include questions for which you already know the answer**

**NEVER include**:

- ❌ Questions with answers from codebase/constitution/spec/copilot instructions
- ❌ Questions where the answer is already known from implementation analysis
- ❌ Questions where the answer can be derived from existing documentation
- ❌ Pre-filled answers or example answers in Write-in questions

**ALWAYS**:

- ✅ Search codebase/docs before adding questions to CLARIFY-QUIZME-##.md
- ✅ Merge CLARIFY-QUIZME-##.md answers into clarify.md, refactor structure/content to accommodate
- ✅ Use updated clarify.md to backport clarifications into constitution.md and spec.md
- ✅ Re-analyze constitution.md, spec.md, clarify.md, generate another CLARIFY-QUIZME-##.md automatically
- ✅ Prompt user to review CLARIFY-QUIZME-##.md if new questions, or automatically run /specify.plan and notify user

## Workflow Gates (Evidence Required)

**CRITICAL: Continuous work directive (01-02) overrides these gates - NEVER stop at gate boundaries waiting for permission**

**Constitution**: No TBD/TODO/FIXME, terminology defined, quality gates, alignment with copilot instructions
**Spec**: Functional/non-functional requirements, architecture, API contracts, security requirements
**Clarify**: Topical organization, clarify.md (knowns), CLARIFY-QUIZME-##.md (unknowns only)
**Plan**: Phases with tasks, dependencies, completion criteria, risk assessment
**Tasks**: Task checklist, completion criteria, phase assignments, dependencies, effort estimates (S/M/L)
**Implement**: Track in DETAILED.md Sections 1+2, coverage ≥95%/98%, mutation ≥85%/98%, timing <15s/<120s unit, <45s/<240s E2E

## Evidence-Based Completion - MANDATORY

**NEVER mark tasks complete during Implementation without objective evidence**:

### Code Evidence

- `go build ./...` clean
- `golangci-lint run` clean
- No new TODOs
- Coverage ≥95% (production code) or ≥98% (infrastructure/utility code)

### Test Evidence

- `go test ./...` passes
- No skips without tracking
- Coverage reports generated

### Mutation Evidence

- `gremlins unleash` passes
- Quality analysis shows ≥85% during early phases
- Quality gate jumps to ≥98% during later phases

### Git Evidence

- Conventional commit format
- Clean working tree
- Changes align with task

### Git Hooks Evidence

- Pre-commit checks pass
- Pre-push checks pass

## Feedback Loop Patterns - MANDATORY

**When discovering constraints/contradictions/lessons during Implementation**:

1. Document in DETAILED.md Section 2 timeline, mark as needing user review for copilot anti-patterns instructions
2. Document in EXECUTIVE.md, mark as needing user review for copilot anti-patterns instructions
3. Update constitution/spec/clarify immediately
4. Commit with traceable reference to source

**CRITICAL**: DON'T PROMPT THE USER TO REVIEW DETAILED.md and EXECUTIVE.md. The user already implicitly knows to asynchronously review DETAILED.md and EXECUTIVE.md.

## Session Documentation Anti-Pattern - CRITICAL

**Problem**: Creating dated session documentation files leads to documentation bloat.

**Result**: 50+ session docs scattered across `docs/`, difficult to find historical context.

### NEVER DO

❌ **Create dated session documentation files** (docs/SESSION-*.md)
❌ **Create standalone analysis documents for session work** (ANALYSIS.md, COMPLETION-ANALYSIS.md)
❌ **Create separate work log files per session**
❌ **Create verbose summaries or completion analyses**
❌ **Create backup files** (plan_backup.md, tasks_backup.md)

### ALWAYS DO

✅ **Append all session-specific work to DETAILED.md Section 2 timeline**
✅ **Update existing plan.md and tasks.md in-place** (no backups, no separate analysis files)
✅ **Create separate docs ONLY for permanent reference material** (ADRs, post-mortems, user guides)
✅ **Keep documentation lean and focused** - prefer updating existing docs over creating new ones

### Rule of Thumb

**Session-specific work** → Append to `DETAILED.md` Section 2 timeline

**Plan/task updates** → Update `plan.md` and `tasks.md` in-place (no backups, no analysis files)

**Permanent reference** → Create dedicated doc:

- `docs/ADR-001-database-choice.md` (architectural decision)
- `docs/P0.1-format-go-regression.md` (post-mortem)
- `docs/USER-GUIDE.md` (user documentation)

## DETAILED.md Structure

### Section 1: Task Checklist

Maintain from tasks.md with:

- Status: ❌ (not started), ⚠️ (in progress/blocked), ✅ (complete)
- Blockers
- Notes
- Coverage metrics
- Commit references

### Section 2: Append-Only Timeline

Chronological entries with:

- **Date**: Task description
- **Work completed**: Summary of implementation
- **Coverage/quality metrics**: Before/after numbers
- **Lessons learned**: Insights discovered
- **Constraints discovered**: Add to constitution.md
- **Requirements discovered**: Add to spec.md
- **Related commits**: Git commit hashes

## EXECUTIVE.md Structure

### Stakeholder Overview

- Current phase
- Progress percentage
- Coverage metrics
- Mutation score
- Blockers

### Customer Demonstrability

- Docker Compose commands
- E2E demo scenarios
- Video demonstrations (optional)

### Risk Tracking

- Known issues with severity
- Impact assessment
- Workarounds
- Root cause analysis
- Resolution plan
- Status

### Post-Mortem Lessons

- Lesson learned
- Prevention pattern
- Where applied
- Reference documentation

## Quick Implementation Checklist

**Before Starting Implementation**:

- ✅ Constitution: No TBD/TODO/FIXME (`grep -i "TBD\|TODO\|FIXME" constitution.md` = 0)
- ✅ Clarify: All QUIZME questions answered, merged into clarify.md
- ✅ Plan: Phases, tasks, dependencies, completion criteria defined

**During Implementation**:

- ✅ Evidence-based completion: Tests pass, coverage ≥95%/98%, mutations ≥85%/98%
- ✅ Update DETAILED.md Section 2 timeline chronologically
- ✅ Update constitution/spec/clarify when discovering new constraints
- ✅ Commit with conventional format, traceable references

**Completion Criteria**:

- ✅ `go build ./...` clean
- ✅ `golangci-lint run` clean
- ✅ `go test ./...` passes (no skips without tracking)
- ✅ Coverage ≥95% production, ≥98% infrastructure/utility
- ✅ `gremlins unleash` passes (≥85% early phases, ≥98% later phases)
- ✅ Git hooks pass (pre-commit, pre-push)

## Key Tactical Patterns

**Living Documents**: Update constitution/spec/clarify immediately when discovering constraints/contradictions
**Async Review**: User reviews DETAILED.md/EXECUTIVE.md asynchronously (don't prompt)
**QUIZME Format**: Multiple choice questions (A-D options + E write-in), ONLY unknowns requiring user input
