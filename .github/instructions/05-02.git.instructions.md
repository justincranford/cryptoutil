---
description: "Local Git commands and commit conventions"
applyTo: "**"
---
# Git

## Conventional Commits Format

<!-- @source from="docs/ARCHITECTURE.md" as="conventional-commits" -->
**Format**: `<type>[optional scope]: <description>`

**Types**: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert

**Examples**:

```bash
feat(auth): add OAuth2 client credentials flow
fix(database): prevent connection pool exhaustion
feat(api)!: remove deprecated v1 endpoints  # Breaking change
```
<!-- @/source -->

See [ARCHITECTURE.md Section 13.2.1 Conventional Commits](../../docs/ARCHITECTURE.md#1321-conventional-commits) and [Section 2.4 Implementation Strategy](../../docs/ARCHITECTURE.md#24-implementation-strategy) for conventional commit format and enforcement.

## Incremental Commits - CRITICAL

<!-- @source from="docs/ARCHITECTURE.md" as="incremental-commits" -->
- ALWAYS commit incrementally (NOT amend) - preserves history for bisect, selective revert.
- NEVER repeatedly amend - loses context, hard to bisect.
- Amend ONLY for immediate typo fixes (<1 min, before push).
<!-- @/source -->

See [ARCHITECTURE.md Section 13.2.2 Incremental Commit Strategy](../../docs/ARCHITECTURE.md#1322-incremental-commit-strategy) and [Section 2.4 Implementation Strategy](../../docs/ARCHITECTURE.md#24-implementation-strategy) for incremental commit patterns and rationale.

## Restore from Clean Baseline Pattern

<!-- @source from="docs/ARCHITECTURE.md" as="restore-from-baseline" -->
**When fixing regressions, ALWAYS restore clean baseline FIRST**:

1. Find last known-good commit (`git log --oneline --grep="baseline"`)
2. Restore package (`git checkout <hash> -- path/to/package/`)
3. Verify baseline works (`go test`)
4. Apply ONLY the new fix (minimal change)
5. Commit as NEW commit (NOT amend)

**Why**: HEAD may be corrupted from previous failed attempts. Start from known-good state.
<!-- @/source -->

See [ARCHITECTURE.md Section 13.2.3 Restore from Clean Baseline Pattern](../../docs/ARCHITECTURE.md#1323-restore-from-clean-baseline-pattern) and [Section 11.2.9 Restore from Clean Baseline Pattern](../../docs/ARCHITECTURE.md#1129-restore-from-clean-baseline-pattern) for baseline restoration workflow and regression fixing patterns.

## Session Documentation Strategy

**NEVER create standalone session docs**: `docs/SESSION-*.md`, `docs/analysis-*.md`

## Git Workflow

**Terminal Commands**: git status, add -A, commit -m, push, log, diff, checkout, mv
**Commit vs Push**: Commit frequently (atomic changes), push strategically (CI/CD ready)
**Pre-Push**: ALWAYS run tests, linting before pushing/PR

See [ARCHITECTURE.md Section 13.2 Version Control](../../docs/ARCHITECTURE.md#132-version-control) and [Section 11.2 Quality Gates](../../docs/ARCHITECTURE.md#112-quality-gates) for git workflow patterns and pre-push quality gates.

## Pull Request Descriptions

**Title**: `type(scope): description` (<72 chars)
**Sections**: What, Why, How, Testing, Breaking Changes
**PR Size**: <200 (small), 200-500 (medium), 500+ (split), 1000+ (break down)

See [ARCHITECTURE.md Section 11.5 Review Processes](../../docs/ARCHITECTURE.md#115-review-processes) and [Section 13.4 Code Review](../../docs/ARCHITECTURE.md#134-code-review) for PR description format and size guidelines.

## PowerShell Notes

- Chain commands with `;` (NOT `&&`)
- Use `Get-Content file | Select-String 'pattern'` for grep-like searches
