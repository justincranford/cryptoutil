# $schema: https://json.schemastore.org/github-action.json
# Doc: https://docs.github.com/en/actions/creating-actions/metadata-syntax-for-github-actions

name: 'docker-compose-build'
description: 'Build Docker images using docker compose'
inputs:
  compose-file:
    description: 'Path to the docker-compose file'
    required: false
    default: './deployments/cryptoutil-suite/compose.yml'
runs:
  using: 'composite'
  steps:
    - name: Build Docker images
      shell: bash
      run: |
        echo "ğŸ—ï¸ Building Docker images..."
        START_TIME=$(date +%s)
        echo "ğŸ“… Start: $(date -u +'%Y-%m-%d %H:%M:%S UTC')"
        docker compose -f ${{ inputs.compose-file }} build
        END_TIME=$(date +%s)
        DURATION=$((END_TIME - START_TIME))
        echo "ğŸ“… End: $(date -u +'%Y-%m-%d %H:%M:%S UTC')"
        echo "â±ï¸ Docker image build completed in: ${DURATION}s"
