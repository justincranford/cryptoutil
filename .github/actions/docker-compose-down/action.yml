# $schema: https://json.schemastore.org/github-action.json
# Doc: https://docs.github.com/en/actions/creating-actions/metadata-syntax-for-github-actions

name: 'docker-compose-down'
description: 'Stop Docker Compose services and clean up volumes'
inputs:
  compose-file:
    description: 'Path to the Docker Compose file'
    required: false
    default: './deployments/cryptoutil-suite/compose.yml'
runs:
  using: 'composite'
  steps:
    - name: Stop services
      shell: bash
      run: |
        echo "üßπ Stopping services..."
        START_TIME=$(date +%s)
        echo "üìÖ Start: $(date -u +'%Y-%m-%d %H:%M:%S UTC')"
        docker compose -f ${{ inputs.compose-file }} down -v
        END_TIME=$(date +%s)
        DURATION=$((END_TIME - START_TIME))
        echo "üìÖ End: $(date -u +'%Y-%m-%d %H:%M:%S UTC')"
        echo "‚è±Ô∏è Service cleanup completed in: ${DURATION}s"
