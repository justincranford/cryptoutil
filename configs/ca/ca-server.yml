# CA Server Configuration
# This file provides the default configuration for the Certificate Authority Server.
# Override with environment-specific configs in deployments/ca/config/

# Server binding
bind-public-address: "127.0.0.1"
bind-public-port: 8091
bind-admin-address: "127.0.0.1"
bind-admin-port: 9091

# TLS configuration for HTTPS
tls-enabled: true
tls-cert-file: ""   # Set in deployment config
tls-key-file: ""    # Set in deployment config

# CORS configuration - HTTPS origins only
cors-origins:
  - "https://localhost:8091"
  - "https://127.0.0.1:8091"

# OTLP telemetry
otlp-enabled: false
otlp-endpoint: ""
otlp-service: "pki-ca"
otlp-hostname: "localhost"

# Logging
log-level: "INFO"

# Development mode - creates self-signed CA on startup
dev: false

# CA configuration (loaded from separate file or inline)
ca:
  name: "cryptoutil-ca"
  description: "Cryptoutil Certificate Authority"
  type: "root"
  subject:
    common_name: "Cryptoutil Root CA"
    organization: "Cryptoutil"
    organizational_unit: "Security"
    country: "US"
  key:
    algorithm: "ECDSA"
    curve_or_size: "P-384"
  validity:
    days: 3650  # 10 years for root CA

# Certificate storage
storage:
  type: "memory"
  # For SQLite: dsn: "file:ca.db?cache=shared&mode=rwc"

# Revocation services
revocation:
  crl:
    enabled: true
    validity_hours: 24
    next_update_hours: 12
  ocsp:
    enabled: true
    validity_minutes: 10

# TSA (Time Stamp Authority) - disabled by default
tsa:
  enabled: false
  policy_oid: "1.2.3.4.5.6.7.8.9"
  accepted_algorithms:
    - "SHA-256"
    - "SHA-384"
    - "SHA-512"

# EST (Enrollment over Secure Transport) - disabled by default
est:
  enabled: false
  mtls_required: true

# Certificate profiles
profiles:
  - id: "tls-server"
    name: "TLS Server Certificate"
    category: "tls"
    path: "configs/ca/profiles/tls-server.yml"
  - id: "tls-client"
    name: "TLS Client Certificate"
    category: "tls"
    path: "configs/ca/profiles/tls-client.yml"
