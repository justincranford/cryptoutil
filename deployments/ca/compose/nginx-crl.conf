# CRL Distribution nginx configuration

server {
    listen 80;
    server_name localhost;

    # Health check endpoint
    location /health {
        return 200 "OK\n";
        add_header Content-Type text/plain;
    }

    # CRL files
    location / {
        root /usr/share/nginx/html;

        # Set appropriate headers for CRL files
        location ~* \.crl$ {
            add_header Content-Type application/pkix-crl;
            add_header Cache-Control "public, max-age=3600";
        }

        # Set appropriate headers for certificate files
        location ~* \.crt$ {
            add_header Content-Type application/x-x509-ca-cert;
            add_header Cache-Control "public, max-age=86400";
        }

        location ~* \.pem$ {
            add_header Content-Type application/x-pem-file;
            add_header Cache-Control "public, max-age=86400";
        }
    }

    # Disable directory listing
    autoindex off;

    # Security headers
    add_header X-Content-Type-Options nosniff;
    add_header X-Frame-Options DENY;
}
