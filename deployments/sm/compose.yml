# PRODUCT-level deployment - SM product (single service: kms)
# See: docs/ARCHITECTURE-COMPOSE-MULTIDEPLOY.md Section 4.2
#
# Usage: cd deployments/sm && docker compose up
#
# Currently sm product has one service (sm-kms), but may have more SM services in the future.
# This compose file includes the sm-kms SERVICE compose file.

include:
  - path: ../sm-kms/compose.yml

# PRODUCT-level secrets (shared by all services in SM product)
# See: docs/ARCHITECTURE-COMPOSE-MULTIDEPLOY.md Section 5.2 "Layered Pepper Strategy"
#
# Currently sm product has only kms service, but additional SM services may be added.
# The PRODUCT pepper would then be shared by all services within the sm product.

secrets:
  sm-hash_pepper.secret:
    file: ./secrets/sm-hash_pepper.secret
