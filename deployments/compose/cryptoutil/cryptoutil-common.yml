# CRITICAL: This file contains COMMON settings used by ALL cryptoutil services in compose.yml
# ALL cryptoutil instances (cryptoutil_sqlite, cryptoutil_postgres_1, cryptoutil_postgres_2)
# MUST use this file for shared configuration. Instance-specific settings belong in
# their respective config files (cryptoutil-sqlite.yml, cryptoutil-postgresql-1.yml, cryptoutil-postgresql-2.yml)
# Changing settings here affects ALL cryptoutil services.

# Logging level (ALL, TRACE, DEBUG, CONFIG, INFO, NOTICE, WARN, ERROR, FATAL, OFF)
# log-level: "INFO"

# Binding address - 0.0.0.0 allows connections from any NIC within the container
bind-public-address: "0.0.0.0"

# TLS configuration for HTTPS
tls-cert-file: /app/tls_public_server_certificate_0.pem
tls-key-file: /app/tls_public_server_private_key.pem

unseal-mode: "3-of-5"

unseal-files:
  - /run/secrets/cryptoutil_unseal_1of5.secret
  - /run/secrets/cryptoutil_unseal_2of5.secret
  - /run/secrets/cryptoutil_unseal_3of5.secret
  - /run/secrets/cryptoutil_unseal_4of5.secret
  - /run/secrets/cryptoutil_unseal_5of5.secret

# Allow all IPs for development/testing
allowed-ips:
  - "127.0.0.1"
  - "::1"
  - "::ffff:127.0.0.1"
allowed-cidrs:
  - "0.0.0.0/0"
  - "::/0"

# Disable CSRF for API testing
csrf-token-single-use-token: false
