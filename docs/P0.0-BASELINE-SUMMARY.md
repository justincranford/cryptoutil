Test Baseline Summary - P0.0 (Phase 0 Task 0)
================================================

Date: 2025-12-12 02:27:00 EST
Environment: Windows 11, Docker Desktop 29.1.2 (running), Go 1.25.5
Test Command: go test ./... -cover -coverprofile=test-output/coverage_baseline.out -shuffle=on
Total Execution Time: 176.89 seconds (~2.95 minutes)

Test Failures (3 packages)
---------------------------
1. cryptoutil/internal/identity/idp (18.209s)
   - Failure: TestHandleJWKS_EmptySet timeout
   - Error: "timeout error 1000ms" at handlers_jwks_test.go:45
   - Message: "Request failed"
   - Status: NEEDS INVESTIGATION (likely HTTP client timeout or async race condition)

2. cryptoutil/internal/infra/tenant [build failed]
   - Failure: Build failed during test compilation
   - Error: "open R:\temp\go-build865536098\b1328\tenant.test.exe: Operation did not complete successfully because the file contains a virus or potentially unwanted software"
   - Cause: Windows Defender false positive (common issue with Go test binaries)
   - Status: NEEDS Windows Defender exclusion for R:\temp\go-build* or investigation

3. cryptoutil/internal/kms/server/repository/sqlrepository (13.660s)
   - Failure: TestNewSQLRepository_PostgreSQL_ContainerPreferred
   - Error: "panic: rootless Docker is not supported on Windows"
   - Cause: Windows Docker Desktop running in rootless mode, testcontainers-go limitation
   - Status: NEEDS INVESTIGATION (Docker Desktop configuration or test skip for rootless mode)

Optimization Targets - Phase 0 (11 packages >10s execution time)
-----------------------------------------------------------------
P0.1: internal/common/crypto/keygen
      Current: 160.845s (SLOWEST)
      Target: <30s
      Reduction needed: 130.845s (81.35%)
      Priority: CRITICAL

P0.2: internal/jose
      Current: 68.353s
      Target: <15s
      Reduction needed: 53.353s (78.05%)
      Priority: HIGH

P0.3: internal/jose/server
      Current: 62.519s
      Target: <20s
      Reduction needed: 42.519s (68.00%)
      Priority: HIGH

P0.4: internal/kms/client
      Current: 51.113s
      Target: <20s
      Reduction needed: 31.113s (60.87%)
      Priority: HIGH

P0.5: internal/identity/test/load
      Current: 30.616s
      Target: <15s
      Reduction needed: 15.616s (51.00%)
      Priority: MEDIUM

P0.6: internal/kms/server/application
      Current: 26.003s
      Target: <15s
      Reduction needed: 11.003s (42.32%)
      Priority: MEDIUM

P0.7: internal/identity/authz/clientauth
      Current: 19.532s
      Target: <10s
      Reduction needed: 9.532s (48.80%)
      Priority: MEDIUM

P0.8: internal/identity/idp
      Current: 18.209s (has failure)
      Target: <10s
      Reduction needed: 8.209s (45.08%)
      Priority: MEDIUM (fix timeout failure first)

P0.9: internal/identity/authz
      Current: 15.988s
      Target: <10s
      Reduction needed: 5.988s (37.45%)
      Priority: LOW

P0.10: internal/kms/server/barrier
      Current: 14.526s
      Target: <10s
      Reduction needed: 4.526s (31.16%)
      Priority: LOW

P0.11: internal/kms/server/repository/sqlrepository
      Current: 13.660s (has failure)
      Target: <10s
      Reduction needed: 3.660s (26.79%)
      Priority: LOW (fix rootless Docker failure first)

Coverage Summary
----------------
Coverage profile saved to: test-output/coverage_baseline.out
Total packages tested: 79+ packages
Most packages: 60-100% coverage
Notable high coverage:
  - internal/cmd/cicd/common: 100.0%
  - internal/common/util/thread: 100.0%
  - internal/common/util/datetime: 100.0%
  - internal/common/util/combinations: 100.0%
  - internal/identity/apperr: 100.0%
  - internal/identity/security: 100.0%
  - internal/identity/ratelimit: 100.0%

Test Results Output Files
--------------------------
- coverage_baseline.out: Full coverage profile data (for analysis)
- coverage_baseline_results.txt: Raw test output with all details
- coverage_baseline_timing.txt: Package execution times (truncated, shows downloads + results)
- coverage_baseline_summary.txt: This file (human-readable summary)

Next Actions Required
----------------------
1. Fix 3 test failures before proceeding to Phase 0 optimizations:
   a. TestHandleJWKS_EmptySet timeout in internal/identity/idp
   b. Windows Defender false positive for internal/infra/tenant
   c. Rootless Docker panic in internal/kms/server/repository/sqlrepository

2. Commit baseline documentation:
   - Message: "test(baseline): complete P0.0 test baseline with coverage and timing data"
   - Include: coverage_baseline_summary.txt, coverage_baseline.out
   - Policy: Commit locally only, DO NOT PUSH

3. Begin P0.1 optimization after failures resolved:
   - Package: internal/common/crypto/keygen
   - Current: 160.845s
   - Target: <30s (81.35% reduction required)

Total Phase 0 Optimization Potential
-------------------------------------
Sum of current execution times (11 packages): 391.364s
Sum of target execution times (11 packages): 135s
Total time reduction target: 256.364s (65.5% improvement)
Expected post-optimization total test suite time: ~120s (down from 176.89s)

Baseline Established Successfully
----------------------------------
This baseline provides the foundation for measuring Phase 0 optimization success.
All subsequent test runs will be compared against this 176.89s baseline.

